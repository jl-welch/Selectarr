!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).selectarr=t()}(this,function(){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a="data-selectarr",l="data-selectarr-list",u="data-selectarr-item",o="selectarr-active",e=function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.keyup=this.keyup.bind(this),this.createList=this.createList.bind(this),this.keyEnter=this.keyEnter.bind(this),this.keyArrow=this.keyArrow.bind(this),this.mouseEnter=this.mouseEnter.bind(this),this._element=document.querySelector(e),this._data=t,this._index=-1,this._element&&this._element.addEventListener("keyup",this.keyup)}var e,t,n;return e=i,n=[{key:"applyValue",value:function(e){var t=e.target.closest("[".concat(u,"]"));if(!t)return i.removeList(),null;var n=t.parentElement.parentElement.querySelector("[".concat(a,"]"));n&&(n.value=t.textContent),i.removeList()}},{key:"changeActive",value:function(e){var t=document.querySelectorAll("[".concat(u,"]"));if(!t.length)return null;var n=document.querySelector(".".concat(o));n&&(n.className=""),t[e].className=o}},{key:"removeList",value:function(){var e=document.querySelector("[".concat(l,"]"));e&&e.parentElement.removeChild(e)}}],(t=[{key:"createList",value:function(e,t){var n,r=this,i=document.createElement("ul");i.setAttribute(l,""),e.forEach(function(e,t){(n=document.createElement("li")).setAttribute(u,t),n.textContent=e,n.addEventListener("mouseenter",r.mouseEnter),i.appendChild(n)}),t.appendChild(i)}},{key:"keyEnter",value:function(e){if(-1===this._index)return null;var t=e.target.closest("[".concat(a,"]")),n=document.querySelectorAll("[".concat(u,"]"));if(!t||!n.length)return null;t.value=n[this._index].textContent,i.removeList()}},{key:"keyArrow",value:function(e){var t=document.querySelectorAll("[".concat(u,"]"));if(!t.length)return null;if("ArrowUp"===e.key){if(0===this._index||-1===this._index)return;this._index--}else{if(this._index===t.length-1)return;this._index=this._index+1}i.changeActive(this._index)}},{key:"mouseEnter",value:function(e){var t=e.target.closest("[".concat(u,"]"));if(!t)return null;this._index=parseInt(t.getAttribute(u),10),i.changeActive(this._index)}},{key:"keyup",value:function(e){if("ArrowUp"!==e.key&&"ArrowDown"!==e.key)if("Enter"!==e.key){this._index=-1,i.removeList();var t=e.target.closest("[".concat(a,"]"));if(!t||!t.value.length)return null;var n=new RegExp(t.value,"gi"),r=this._data.filter(function(e){return e.match(n)});r.length&&this.createList(r,t.parentElement)}else this.keyEnter(e);else this.keyArrow(e)}}])&&r(e.prototype,t),n&&r(e,n),i}();return document.addEventListener("click",e.applyValue),e});